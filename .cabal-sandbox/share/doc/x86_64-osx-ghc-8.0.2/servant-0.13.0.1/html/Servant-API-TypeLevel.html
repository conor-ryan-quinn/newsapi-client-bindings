<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Servant.API.TypeLevel</title><link href="ocean.css" rel="stylesheet" type="text/css" title="Ocean" /><script src="haddock-util.js" type="text/javascript"></script><script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script><script type="text/javascript">//<![CDATA[
window.onload = function () {pageLoad();setSynopsis("mini_Servant-API-TypeLevel.html");};
//]]>
</script></head><body><div id="package-header"><ul class="links" id="page-menu"><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul><p class="caption">servant-0.13.0.1: A family of combinators for defining webservices APIs</p></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>None</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">Servant.API.TypeLevel</p></div><div id="table-of-contents"><p class="caption">Contents</p><ul><li><a href="#g:1">Lax inclusion</a></li><li><a href="#g:2">Strict inclusion</a></li><li><a href="#g:3">Helpers</a><ul><li><a href="#g:4">Lists</a></li><li><a href="#g:5">Logic</a></li></ul></li><li><a href="#g:6">Custom type errors</a></li></ul></div><div id="description"><p class="caption">Description</p><div class="doc"><p>This module collects utilities for manipulating <code>servant</code> API types. The
functionality in this module is for advanced usage.</p><p>The code samples in this module use the following type synonym:</p><pre>type SampleAPI = &quot;hello&quot; :&gt; Get '[JSON] Int
            :&lt;|&gt; &quot;bye&quot; :&gt; Capture &quot;name&quot; String :&gt; Post '[JSON, PlainText] Bool</pre></div></div><div id="synopsis"><p id="control.syn" class="caption expander" onclick="toggleSection('syn')">Synopsis</p><ul id="section.syn" class="hide" onclick="toggleSection('syn')"><li class="src short"><span class="keyword">type family</span> <a href="#t:Endpoints">Endpoints</a> api <span class="keyword">where ...</span></li><li class="src short"><span class="keyword">type family</span> <a href="#t:IsElem-39-">IsElem'</a> a s :: <a href="file:///Library/Frameworks/GHC.framework/Versions/8.0.2-x86_64/usr/share/doc/ghc-8.0.2/html/libraries/base-4.9.1.0/Data-Kind.html#t:Constraint">Constraint</a></li><li class="src short"><span class="keyword">type family</span> <a href="#t:IsElem">IsElem</a> endpoint api :: <a href="file:///Library/Frameworks/GHC.framework/Versions/8.0.2-x86_64/usr/share/doc/ghc-8.0.2/html/libraries/base-4.9.1.0/Data-Kind.html#t:Constraint">Constraint</a> <span class="keyword">where ...</span></li><li class="src short"><span class="keyword">type family</span> <a href="#t:IsSubAPI">IsSubAPI</a> sub api :: <a href="file:///Library/Frameworks/GHC.framework/Versions/8.0.2-x86_64/usr/share/doc/ghc-8.0.2/html/libraries/base-4.9.1.0/Data-Kind.html#t:Constraint">Constraint</a> <span class="keyword">where ...</span></li><li class="src short"><span class="keyword">type family</span> <a href="#t:AllIsElem">AllIsElem</a> xs api :: <a href="file:///Library/Frameworks/GHC.framework/Versions/8.0.2-x86_64/usr/share/doc/ghc-8.0.2/html/libraries/base-4.9.1.0/Data-Kind.html#t:Constraint">Constraint</a> <span class="keyword">where ...</span></li><li class="src short"><span class="keyword">type family</span> <a href="#t:IsIn">IsIn</a> (endpoint :: <a href="file:///Library/Frameworks/GHC.framework/Versions/8.0.2-x86_64/usr/share/doc/ghc-8.0.2/html/libraries/base-4.9.1.0/Data-Kind.html#t:-42-">*</a>) (api :: <a href="file:///Library/Frameworks/GHC.framework/Versions/8.0.2-x86_64/usr/share/doc/ghc-8.0.2/html/libraries/base-4.9.1.0/Data-Kind.html#t:-42-">*</a>) :: <a href="file:///Library/Frameworks/GHC.framework/Versions/8.0.2-x86_64/usr/share/doc/ghc-8.0.2/html/libraries/base-4.9.1.0/Data-Kind.html#t:Constraint">Constraint</a> <span class="keyword">where ...</span></li><li class="src short"><span class="keyword">type family</span> <a href="#t:IsStrictSubAPI">IsStrictSubAPI</a> sub api :: <a href="file:///Library/Frameworks/GHC.framework/Versions/8.0.2-x86_64/usr/share/doc/ghc-8.0.2/html/libraries/base-4.9.1.0/Data-Kind.html#t:Constraint">Constraint</a> <span class="keyword">where ...</span></li><li class="src short"><span class="keyword">type family</span> <a href="#t:AllIsIn">AllIsIn</a> xs api :: <a href="file:///Library/Frameworks/GHC.framework/Versions/8.0.2-x86_64/usr/share/doc/ghc-8.0.2/html/libraries/base-4.9.1.0/Data-Kind.html#t:Constraint">Constraint</a> <span class="keyword">where ...</span></li><li class="src short"><span class="keyword">type family</span> <a href="#t:MapSub">MapSub</a> e xs <span class="keyword">where ...</span></li><li class="src short"><span class="keyword">type family</span> <a href="#t:AppendList">AppendList</a> xs ys <span class="keyword">where ...</span></li><li class="src short"><span class="keyword">type family</span> <a href="#t:IsSubList">IsSubList</a> a b :: <a href="file:///Library/Frameworks/GHC.framework/Versions/8.0.2-x86_64/usr/share/doc/ghc-8.0.2/html/libraries/base-4.9.1.0/Data-Kind.html#t:Constraint">Constraint</a> <span class="keyword">where ...</span></li><li class="src short"><span class="keyword">type</span> <a href="#t:Elem">Elem</a> e es = <a href="Servant-API-TypeLevel.html#t:ElemGo">ElemGo</a> e es es</li><li class="src short"><span class="keyword">type family</span> <a href="#t:ElemGo">ElemGo</a> e es orig :: <a href="file:///Library/Frameworks/GHC.framework/Versions/8.0.2-x86_64/usr/share/doc/ghc-8.0.2/html/libraries/base-4.9.1.0/Data-Kind.html#t:Constraint">Constraint</a> <span class="keyword">where ...</span></li><li class="src short"><span class="keyword">type family</span> <a href="#t:Or">Or</a> (a :: <a href="file:///Library/Frameworks/GHC.framework/Versions/8.0.2-x86_64/usr/share/doc/ghc-8.0.2/html/libraries/base-4.9.1.0/Data-Kind.html#t:Constraint">Constraint</a>) (b :: <a href="file:///Library/Frameworks/GHC.framework/Versions/8.0.2-x86_64/usr/share/doc/ghc-8.0.2/html/libraries/base-4.9.1.0/Data-Kind.html#t:Constraint">Constraint</a>) :: <a href="file:///Library/Frameworks/GHC.framework/Versions/8.0.2-x86_64/usr/share/doc/ghc-8.0.2/html/libraries/base-4.9.1.0/Data-Kind.html#t:Constraint">Constraint</a> <span class="keyword">where ...</span></li><li class="src short"><span class="keyword">type family</span> <a href="#t:And">And</a> (a :: <a href="file:///Library/Frameworks/GHC.framework/Versions/8.0.2-x86_64/usr/share/doc/ghc-8.0.2/html/libraries/base-4.9.1.0/Data-Kind.html#t:Constraint">Constraint</a>) (b :: <a href="file:///Library/Frameworks/GHC.framework/Versions/8.0.2-x86_64/usr/share/doc/ghc-8.0.2/html/libraries/base-4.9.1.0/Data-Kind.html#t:Constraint">Constraint</a>) :: <a href="file:///Library/Frameworks/GHC.framework/Versions/8.0.2-x86_64/usr/share/doc/ghc-8.0.2/html/libraries/base-4.9.1.0/Data-Kind.html#t:Constraint">Constraint</a> <span class="keyword">where ...</span></li></ul></div><div id="interface"><h1>Documentation</h1><div class="doc"><p>The doctests in this module are run with following preamble:</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>:set -XPolyKinds
</code></strong><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>:set -XGADTs
</code></strong><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>import Data.Proxy
</code></strong><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>import Data.Type.Equality
</code></strong><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>import Servant.API
</code></strong><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>data OK ctx where OK :: ctx =&gt; OK ctx
</code></strong><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>instance Show (OK ctx) where show _ = &quot;OK&quot;
</code></strong><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>let ok :: ctx =&gt; Proxy ctx -&gt; OK ctx; ok _ = OK
</code></strong><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>type SampleAPI = &quot;hello&quot; :&gt; Get '[JSON] Int :&lt;|&gt; &quot;bye&quot; :&gt; Capture &quot;name&quot; String :&gt; Post '[JSON, PlainText] Bool
</code></strong><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>let sampleAPI = Proxy :: Proxy SampleAPI
</code></strong></pre></div><div class="top"><p class="src"><span class="keyword">type family</span> <a id="t:Endpoints" class="def">Endpoints</a> api <span class="keyword">where ...</span> <a href="#t:Endpoints" class="selflink">#</a></p><div class="doc"><p>Flatten API into a list of endpoints.</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>Refl :: Endpoints SampleAPI :~: '[&quot;hello&quot; :&gt; Verb 'GET 200 '[JSON] Int, &quot;bye&quot; :&gt; (Capture &quot;name&quot; String :&gt; Verb 'POST 200 '[JSON, PlainText] Bool)]
</code></strong>Refl
</pre></div><div class="subs equations"><p class="caption">Equations</p><table><tr><td class="src"><a href="Servant-API-TypeLevel.html#t:Endpoints">Endpoints</a> (a <a href="Servant-API-Alternative.html#t::-60--124--62-">:&lt;|&gt;</a> b) = <a href="Servant-API-TypeLevel.html#t:AppendList">AppendList</a> (<a href="Servant-API-TypeLevel.html#t:Endpoints">Endpoints</a> a) (<a href="Servant-API-TypeLevel.html#t:Endpoints">Endpoints</a> b)</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a href="Servant-API-TypeLevel.html#t:Endpoints">Endpoints</a> (e <a href="Servant-API-Sub.html#t::-62-">:&gt;</a> a) = <a href="Servant-API-TypeLevel.html#t:MapSub">MapSub</a> e (<a href="Servant-API-TypeLevel.html#t:Endpoints">Endpoints</a> a)</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a href="Servant-API-TypeLevel.html#t:Endpoints">Endpoints</a> a = '[a]</td><td class="doc empty">&nbsp;</td></tr></table></div></div><h2 id="g:1">Lax inclusion</h2><div class="top"><p class="src"><span class="keyword">type family</span> <a id="t:IsElem-39-" class="def">IsElem'</a> a s :: <a href="file:///Library/Frameworks/GHC.framework/Versions/8.0.2-x86_64/usr/share/doc/ghc-8.0.2/html/libraries/base-4.9.1.0/Data-Kind.html#t:Constraint">Constraint</a> <a href="#t:IsElem-39-" class="selflink">#</a></p><div class="doc"><p>You may use this type family to tell the type checker that your custom
 type may be skipped as part of a link. This is useful for things like
 <code><code><a href="Servant-API-QueryParam.html#t:QueryParam">QueryParam</a></code></code> that are optional in a URI and do not affect them if they are
 omitted.</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>data CustomThing
</code></strong><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>type instance IsElem' e (CustomThing :&gt; s) = IsElem e s
</code></strong></pre><p>Note that <code><code><a href="Servant-API-TypeLevel.html#t:IsElem">IsElem</a></code></code> is called, which will mutually recurse back to <code><code><a href="Servant-API-TypeLevel.html#t:IsElem-39-">IsElem'</a></code></code>
 if it exhausts all other options again.</p><p>Once you have written a <code>HasLink</code> instance for <code>CustomThing</code> you are ready to go.</p></div></div><div class="top"><p class="src"><span class="keyword">type family</span> <a id="t:IsElem" class="def">IsElem</a> endpoint api :: <a href="file:///Library/Frameworks/GHC.framework/Versions/8.0.2-x86_64/usr/share/doc/ghc-8.0.2/html/libraries/base-4.9.1.0/Data-Kind.html#t:Constraint">Constraint</a> <span class="keyword">where ...</span> <a href="#t:IsElem" class="selflink">#</a></p><div class="doc"><p>Closed type family, check if <code>endpoint</code> is within <code>api</code>.
 Uses <code><code><a href="Servant-API-TypeLevel.html#t:IsElem-39-">IsElem'</a></code></code> if it exhausts all other options.</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>ok (Proxy :: Proxy (IsElem (&quot;hello&quot; :&gt; Get '[JSON] Int) SampleAPI))
</code></strong>OK
</pre><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>ok (Proxy :: Proxy (IsElem (&quot;bye&quot; :&gt; Get '[JSON] Int) SampleAPI))
</code></strong>...
... Could not deduce...
...
</pre><p>An endpoint is considered within an api even if it is missing combinators
 that don't affect the URL:</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>ok (Proxy :: Proxy (IsElem (Get '[JSON] Int) (Header &quot;h&quot; Bool :&gt; Get '[JSON] Int)))
</code></strong>OK
</pre><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>ok (Proxy :: Proxy (IsElem (Get '[JSON] Int) (ReqBody '[JSON] Bool :&gt; Get '[JSON] Int)))
</code></strong>OK
</pre><ul><li>N.B.:* <code>IsElem a b</code> can be seen as capturing the notion of whether the URL
 represented by <code>a</code> would match the URL represented by <code>b</code>, *not* whether a
 request represented by <code>a</code> matches the endpoints serving <code>b</code> (for the
 latter, use <code><a href="Servant-API-TypeLevel.html#t:IsIn">IsIn</a></code>).</li></ul></div><div class="subs equations"><p class="caption">Equations</p><table><tr><td class="src"><a href="Servant-API-TypeLevel.html#t:IsElem">IsElem</a> e (sa <a href="Servant-API-Alternative.html#t::-60--124--62-">:&lt;|&gt;</a> sb) = <a href="Servant-API-TypeLevel.html#t:Or">Or</a> (<a href="Servant-API-TypeLevel.html#t:IsElem">IsElem</a> e sa) (<a href="Servant-API-TypeLevel.html#t:IsElem">IsElem</a> e sb)</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a href="Servant-API-TypeLevel.html#t:IsElem">IsElem</a> (e <a href="Servant-API-Sub.html#t::-62-">:&gt;</a> sa) (e <a href="Servant-API-Sub.html#t::-62-">:&gt;</a> sb) = <a href="Servant-API-TypeLevel.html#t:IsElem">IsElem</a> sa sb</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a href="Servant-API-TypeLevel.html#t:IsElem">IsElem</a> sa (<a href="Servant-API-Header.html#t:Header">Header</a> sym x <a href="Servant-API-Sub.html#t::-62-">:&gt;</a> sb) = <a href="Servant-API-TypeLevel.html#t:IsElem">IsElem</a> sa sb</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a href="Servant-API-TypeLevel.html#t:IsElem">IsElem</a> sa (<a href="Servant-API-ReqBody.html#t:ReqBody">ReqBody</a> y x <a href="Servant-API-Sub.html#t::-62-">:&gt;</a> sb) = <a href="Servant-API-TypeLevel.html#t:IsElem">IsElem</a> sa sb</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a href="Servant-API-TypeLevel.html#t:IsElem">IsElem</a> (<a href="Servant-API-Capture.html#t:CaptureAll">CaptureAll</a> z y <a href="Servant-API-Sub.html#t::-62-">:&gt;</a> sa) (<a href="Servant-API-Capture.html#t:CaptureAll">CaptureAll</a> x y <a href="Servant-API-Sub.html#t::-62-">:&gt;</a> sb) = <a href="Servant-API-TypeLevel.html#t:IsElem">IsElem</a> sa sb</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a href="Servant-API-TypeLevel.html#t:IsElem">IsElem</a> (<a href="Servant-API-Capture.html#t:Capture">Capture</a> z y <a href="Servant-API-Sub.html#t::-62-">:&gt;</a> sa) (<a href="Servant-API-Capture.html#t:Capture">Capture</a> x y <a href="Servant-API-Sub.html#t::-62-">:&gt;</a> sb) = <a href="Servant-API-TypeLevel.html#t:IsElem">IsElem</a> sa sb</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a href="Servant-API-TypeLevel.html#t:IsElem">IsElem</a> sa (<a href="Servant-API-QueryParam.html#t:QueryParam">QueryParam</a> x y <a href="Servant-API-Sub.html#t::-62-">:&gt;</a> sb) = <a href="Servant-API-TypeLevel.html#t:IsElem">IsElem</a> sa sb</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a href="Servant-API-TypeLevel.html#t:IsElem">IsElem</a> sa (<a href="Servant-API-QueryParam.html#t:QueryParams">QueryParams</a> x y <a href="Servant-API-Sub.html#t::-62-">:&gt;</a> sb) = <a href="Servant-API-TypeLevel.html#t:IsElem">IsElem</a> sa sb</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a href="Servant-API-TypeLevel.html#t:IsElem">IsElem</a> sa (<a href="Servant-API-QueryParam.html#t:QueryFlag">QueryFlag</a> x <a href="Servant-API-Sub.html#t::-62-">:&gt;</a> sb) = <a href="Servant-API-TypeLevel.html#t:IsElem">IsElem</a> sa sb</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a href="Servant-API-TypeLevel.html#t:IsElem">IsElem</a> (<a href="Servant-API-Verbs.html#t:Verb">Verb</a> m s ct typ) (<a href="Servant-API-Verbs.html#t:Verb">Verb</a> m s ct' typ) = <a href="Servant-API-TypeLevel.html#t:IsSubList">IsSubList</a> ct ct'</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a href="Servant-API-TypeLevel.html#t:IsElem">IsElem</a> e e = ()</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a href="Servant-API-TypeLevel.html#t:IsElem">IsElem</a> e a = <a href="Servant-API-TypeLevel.html#t:IsElem-39-">IsElem'</a> e a</td><td class="doc empty">&nbsp;</td></tr></table></div></div><div class="top"><p class="src"><span class="keyword">type family</span> <a id="t:IsSubAPI" class="def">IsSubAPI</a> sub api :: <a href="file:///Library/Frameworks/GHC.framework/Versions/8.0.2-x86_64/usr/share/doc/ghc-8.0.2/html/libraries/base-4.9.1.0/Data-Kind.html#t:Constraint">Constraint</a> <span class="keyword">where ...</span> <a href="#t:IsSubAPI" class="selflink">#</a></p><div class="doc"><p>Check whether <code>sub</code> is a sub-API of <code>api</code>.</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>ok (Proxy :: Proxy (IsSubAPI SampleAPI (SampleAPI :&lt;|&gt; Get '[JSON] Int)))
</code></strong>OK
</pre><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>ok (Proxy :: Proxy (IsSubAPI (SampleAPI :&lt;|&gt; Get '[JSON] Int) SampleAPI))
</code></strong>...
... Could not deduce...
...
</pre><p>This uses <code>IsElem</code> for checking; thus the note there applies here.</p></div><div class="subs equations"><p class="caption">Equations</p><table><tr><td class="src"><a href="Servant-API-TypeLevel.html#t:IsSubAPI">IsSubAPI</a> sub api = <a href="Servant-API-TypeLevel.html#t:AllIsElem">AllIsElem</a> (<a href="Servant-API-TypeLevel.html#t:Endpoints">Endpoints</a> sub) api</td><td class="doc empty">&nbsp;</td></tr></table></div></div><div class="top"><p class="src"><span class="keyword">type family</span> <a id="t:AllIsElem" class="def">AllIsElem</a> xs api :: <a href="file:///Library/Frameworks/GHC.framework/Versions/8.0.2-x86_64/usr/share/doc/ghc-8.0.2/html/libraries/base-4.9.1.0/Data-Kind.html#t:Constraint">Constraint</a> <span class="keyword">where ...</span> <a href="#t:AllIsElem" class="selflink">#</a></p><div class="doc"><p>Check that every element of <code>xs</code> is an endpoint of <code>api</code> (using <code><code><a href="Servant-API-TypeLevel.html#t:IsElem">IsElem</a></code></code>).</p></div><div class="subs equations"><p class="caption">Equations</p><table><tr><td class="src"><a href="Servant-API-TypeLevel.html#t:AllIsElem">AllIsElem</a> '[] api = ()</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a href="Servant-API-TypeLevel.html#t:AllIsElem">AllIsElem</a> (x ': xs) api = (<a href="Servant-API-TypeLevel.html#t:IsElem">IsElem</a> x api, <a href="Servant-API-TypeLevel.html#t:AllIsElem">AllIsElem</a> xs api)</td><td class="doc empty">&nbsp;</td></tr></table></div></div><h2 id="g:2">Strict inclusion</h2><div class="top"><p class="src"><span class="keyword">type family</span> <a id="t:IsIn" class="def">IsIn</a> (endpoint :: <a href="file:///Library/Frameworks/GHC.framework/Versions/8.0.2-x86_64/usr/share/doc/ghc-8.0.2/html/libraries/base-4.9.1.0/Data-Kind.html#t:-42-">*</a>) (api :: <a href="file:///Library/Frameworks/GHC.framework/Versions/8.0.2-x86_64/usr/share/doc/ghc-8.0.2/html/libraries/base-4.9.1.0/Data-Kind.html#t:-42-">*</a>) :: <a href="file:///Library/Frameworks/GHC.framework/Versions/8.0.2-x86_64/usr/share/doc/ghc-8.0.2/html/libraries/base-4.9.1.0/Data-Kind.html#t:Constraint">Constraint</a> <span class="keyword">where ...</span> <a href="#t:IsIn" class="selflink">#</a></p><div class="doc"><p>Closed type family, check if <code>endpoint</code> is exactly within <code>api</code>.</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>ok (Proxy :: Proxy (IsIn (&quot;hello&quot; :&gt; Get '[JSON] Int) SampleAPI))
</code></strong>OK
</pre><p>Unlike <code><a href="Servant-API-TypeLevel.html#t:IsElem">IsElem</a></code>, this requires an *exact* match.</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>ok (Proxy :: Proxy (IsIn (Get '[JSON] Int) (Header &quot;h&quot; Bool :&gt; Get '[JSON] Int)))
</code></strong>...
... Could not deduce...
...
</pre></div><div class="subs equations"><p class="caption">Equations</p><table><tr><td class="src"><a href="Servant-API-TypeLevel.html#t:IsIn">IsIn</a> e (sa <a href="Servant-API-Alternative.html#t::-60--124--62-">:&lt;|&gt;</a> sb) = <a href="Servant-API-TypeLevel.html#t:Or">Or</a> (<a href="Servant-API-TypeLevel.html#t:IsIn">IsIn</a> e sa) (<a href="Servant-API-TypeLevel.html#t:IsIn">IsIn</a> e sb)</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a href="Servant-API-TypeLevel.html#t:IsIn">IsIn</a> (e <a href="Servant-API-Sub.html#t::-62-">:&gt;</a> sa) (e <a href="Servant-API-Sub.html#t::-62-">:&gt;</a> sb) = <a href="Servant-API-TypeLevel.html#t:IsIn">IsIn</a> sa sb</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a href="Servant-API-TypeLevel.html#t:IsIn">IsIn</a> e e = ()</td><td class="doc empty">&nbsp;</td></tr></table></div></div><div class="top"><p class="src"><span class="keyword">type family</span> <a id="t:IsStrictSubAPI" class="def">IsStrictSubAPI</a> sub api :: <a href="file:///Library/Frameworks/GHC.framework/Versions/8.0.2-x86_64/usr/share/doc/ghc-8.0.2/html/libraries/base-4.9.1.0/Data-Kind.html#t:Constraint">Constraint</a> <span class="keyword">where ...</span> <a href="#t:IsStrictSubAPI" class="selflink">#</a></p><div class="doc"><p>Check whether <code>sub</code> is a sub API of <code>api</code>.</p><p>Like <code><a href="Servant-API-TypeLevel.html#t:IsSubAPI">IsSubAPI</a></code>, but uses <code><a href="Servant-API-TypeLevel.html#t:IsIn">IsIn</a></code> rather than <code><a href="Servant-API-TypeLevel.html#t:IsElem">IsElem</a></code>.</p></div><div class="subs equations"><p class="caption">Equations</p><table><tr><td class="src"><a href="Servant-API-TypeLevel.html#t:IsStrictSubAPI">IsStrictSubAPI</a> sub api = <a href="Servant-API-TypeLevel.html#t:AllIsIn">AllIsIn</a> (<a href="Servant-API-TypeLevel.html#t:Endpoints">Endpoints</a> sub) api</td><td class="doc empty">&nbsp;</td></tr></table></div></div><div class="top"><p class="src"><span class="keyword">type family</span> <a id="t:AllIsIn" class="def">AllIsIn</a> xs api :: <a href="file:///Library/Frameworks/GHC.framework/Versions/8.0.2-x86_64/usr/share/doc/ghc-8.0.2/html/libraries/base-4.9.1.0/Data-Kind.html#t:Constraint">Constraint</a> <span class="keyword">where ...</span> <a href="#t:AllIsIn" class="selflink">#</a></p><div class="doc"><p>Check that every element of <code>xs</code> is an endpoint of <code>api</code> (using <code><code><a href="Servant-API-TypeLevel.html#t:IsIn">IsIn</a></code></code>).</p><p>ok (Proxy :: Proxy (AllIsIn (Endpoints SampleAPI) SampleAPI))
 OK</p></div><div class="subs equations"><p class="caption">Equations</p><table><tr><td class="src"><a href="Servant-API-TypeLevel.html#t:AllIsIn">AllIsIn</a> '[] api = ()</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a href="Servant-API-TypeLevel.html#t:AllIsIn">AllIsIn</a> (x ': xs) api = (<a href="Servant-API-TypeLevel.html#t:IsIn">IsIn</a> x api, <a href="Servant-API-TypeLevel.html#t:AllIsIn">AllIsIn</a> xs api)</td><td class="doc empty">&nbsp;</td></tr></table></div></div><h1 id="g:3">Helpers</h1><h2 id="g:4">Lists</h2><div class="top"><p class="src"><span class="keyword">type family</span> <a id="t:MapSub" class="def">MapSub</a> e xs <span class="keyword">where ...</span> <a href="#t:MapSub" class="selflink">#</a></p><div class="doc"><p>Apply <code>(e :&gt;)</code> to every API in <code>xs</code>.</p></div><div class="subs equations"><p class="caption">Equations</p><table><tr><td class="src"><a href="Servant-API-TypeLevel.html#t:MapSub">MapSub</a> e '[] = '[]</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a href="Servant-API-TypeLevel.html#t:MapSub">MapSub</a> e (x ': xs) = (e <a href="Servant-API-Sub.html#t::-62-">:&gt;</a> x) ': <a href="Servant-API-TypeLevel.html#t:MapSub">MapSub</a> e xs</td><td class="doc empty">&nbsp;</td></tr></table></div></div><div class="top"><p class="src"><span class="keyword">type family</span> <a id="t:AppendList" class="def">AppendList</a> xs ys <span class="keyword">where ...</span> <a href="#t:AppendList" class="selflink">#</a></p><div class="doc"><p>Append two type-level lists.</p></div><div class="subs equations"><p class="caption">Equations</p><table><tr><td class="src"><a href="Servant-API-TypeLevel.html#t:AppendList">AppendList</a> '[] ys = ys</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a href="Servant-API-TypeLevel.html#t:AppendList">AppendList</a> (x ': xs) ys = x ': <a href="Servant-API-TypeLevel.html#t:AppendList">AppendList</a> xs ys</td><td class="doc empty">&nbsp;</td></tr></table></div></div><div class="top"><p class="src"><span class="keyword">type family</span> <a id="t:IsSubList" class="def">IsSubList</a> a b :: <a href="file:///Library/Frameworks/GHC.framework/Versions/8.0.2-x86_64/usr/share/doc/ghc-8.0.2/html/libraries/base-4.9.1.0/Data-Kind.html#t:Constraint">Constraint</a> <span class="keyword">where ...</span> <a href="#t:IsSubList" class="selflink">#</a></p><div class="subs equations"><p class="caption">Equations</p><table><tr><td class="src"><a href="Servant-API-TypeLevel.html#t:IsSubList">IsSubList</a> '[] b = ()</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a href="Servant-API-TypeLevel.html#t:IsSubList">IsSubList</a> (x ': xs) y = <a href="Servant-API-TypeLevel.html#t:Elem">Elem</a> x y <a href="Servant-API-TypeLevel.html#t:And">`And`</a> <a href="Servant-API-TypeLevel.html#t:IsSubList">IsSubList</a> xs y</td><td class="doc empty">&nbsp;</td></tr></table></div></div><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:Elem" class="def">Elem</a> e es = <a href="Servant-API-TypeLevel.html#t:ElemGo">ElemGo</a> e es es <a href="#t:Elem" class="selflink">#</a></p><div class="doc"><p>Check that a value is an element of a list:</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>ok (Proxy :: Proxy (Elem Bool '[Int, Bool]))
</code></strong>OK
</pre><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>ok (Proxy :: Proxy (Elem String '[Int, Bool]))
</code></strong>...
... [Char]...'[Int, Bool...
...
</pre></div></div><div class="top"><p class="src"><span class="keyword">type family</span> <a id="t:ElemGo" class="def">ElemGo</a> e es orig :: <a href="file:///Library/Frameworks/GHC.framework/Versions/8.0.2-x86_64/usr/share/doc/ghc-8.0.2/html/libraries/base-4.9.1.0/Data-Kind.html#t:Constraint">Constraint</a> <span class="keyword">where ...</span> <a href="#t:ElemGo" class="selflink">#</a></p><div class="subs equations"><p class="caption">Equations</p><table><tr><td class="src"><a href="Servant-API-TypeLevel.html#t:ElemGo">ElemGo</a> x (x ': xs) orig = ()</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a href="Servant-API-TypeLevel.html#t:ElemGo">ElemGo</a> y (x ': xs) orig = <a href="Servant-API-TypeLevel.html#t:ElemGo">ElemGo</a> y xs orig</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a href="Servant-API-TypeLevel.html#t:ElemGo">ElemGo</a> x '[] orig = <a href="file:///Library/Frameworks/GHC.framework/Versions/8.0.2-x86_64/usr/share/doc/ghc-8.0.2/html/libraries/base-4.9.1.0/GHC-TypeLits.html#t:TypeError">TypeError</a> ((<a href="file:///Library/Frameworks/GHC.framework/Versions/8.0.2-x86_64/usr/share/doc/ghc-8.0.2/html/libraries/base-4.9.1.0/GHC-TypeLits.html#v:ShowType">ShowType</a> x <a href="file:///Library/Frameworks/GHC.framework/Versions/8.0.2-x86_64/usr/share/doc/ghc-8.0.2/html/libraries/base-4.9.1.0/GHC-TypeLits.html#v::-60--62-:">:&lt;&gt;:</a> <a href="file:///Library/Frameworks/GHC.framework/Versions/8.0.2-x86_64/usr/share/doc/ghc-8.0.2/html/libraries/base-4.9.1.0/GHC-TypeLits.html#v:Text">Text</a> &quot; expected in list &quot;) <a href="file:///Library/Frameworks/GHC.framework/Versions/8.0.2-x86_64/usr/share/doc/ghc-8.0.2/html/libraries/base-4.9.1.0/GHC-TypeLits.html#v::-60--62-:">:&lt;&gt;:</a> <a href="file:///Library/Frameworks/GHC.framework/Versions/8.0.2-x86_64/usr/share/doc/ghc-8.0.2/html/libraries/base-4.9.1.0/GHC-TypeLits.html#v:ShowType">ShowType</a> orig)</td><td class="doc empty">&nbsp;</td></tr></table></div></div><h2 id="g:5">Logic</h2><div class="top"><p class="src"><span class="keyword">type family</span> <a id="t:Or" class="def">Or</a> (a :: <a href="file:///Library/Frameworks/GHC.framework/Versions/8.0.2-x86_64/usr/share/doc/ghc-8.0.2/html/libraries/base-4.9.1.0/Data-Kind.html#t:Constraint">Constraint</a>) (b :: <a href="file:///Library/Frameworks/GHC.framework/Versions/8.0.2-x86_64/usr/share/doc/ghc-8.0.2/html/libraries/base-4.9.1.0/Data-Kind.html#t:Constraint">Constraint</a>) :: <a href="file:///Library/Frameworks/GHC.framework/Versions/8.0.2-x86_64/usr/share/doc/ghc-8.0.2/html/libraries/base-4.9.1.0/Data-Kind.html#t:Constraint">Constraint</a> <span class="keyword">where ...</span> <a href="#t:Or" class="selflink">#</a></p><div class="doc"><p>If either a or b produce an empty constraint, produce an empty constraint.</p></div><div class="subs equations"><p class="caption">Equations</p><table><tr><td class="src"><a href="Servant-API-TypeLevel.html#t:Or">Or</a> () b = ()</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a href="Servant-API-TypeLevel.html#t:Or">Or</a> a () = ()</td><td class="doc empty">&nbsp;</td></tr></table></div></div><div class="top"><p class="src"><span class="keyword">type family</span> <a id="t:And" class="def">And</a> (a :: <a href="file:///Library/Frameworks/GHC.framework/Versions/8.0.2-x86_64/usr/share/doc/ghc-8.0.2/html/libraries/base-4.9.1.0/Data-Kind.html#t:Constraint">Constraint</a>) (b :: <a href="file:///Library/Frameworks/GHC.framework/Versions/8.0.2-x86_64/usr/share/doc/ghc-8.0.2/html/libraries/base-4.9.1.0/Data-Kind.html#t:Constraint">Constraint</a>) :: <a href="file:///Library/Frameworks/GHC.framework/Versions/8.0.2-x86_64/usr/share/doc/ghc-8.0.2/html/libraries/base-4.9.1.0/Data-Kind.html#t:Constraint">Constraint</a> <span class="keyword">where ...</span> <a href="#t:And" class="selflink">#</a></p><div class="doc"><p>If both a or b produce an empty constraint, produce an empty constraint.</p></div><div class="subs equations"><p class="caption">Equations</p><table><tr><td class="src"><a href="Servant-API-TypeLevel.html#t:And">And</a> () () = ()</td><td class="doc empty">&nbsp;</td></tr></table></div></div><h1 id="g:6">Custom type errors</h1><div class="doc"><p>Before <code>base-4.9.0.0</code> we use non-exported <code>ElemNotFoundIn</code> class,
 which cannot be instantiated.</p></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.17.3</p></div></body></html>